vine_sample
===========

尝试用Cocos2d-x实现藤蔓动态蔓延的效果

# 如何使用Sublime Text2运行项目

1. 用Cocos Code IDE打开项目并编译Mac Runtime
2. 将tools文件夹下的Run Vine Sample.sublime-build文件添加到 **~/Library/Application Support/Sublime Text 2/Packages/User/** 文件夹下
3. 在Sublime Text 2中打开项目
4. 菜单选择 **Tools/Build System/Run Vine Sample**
5. cmd+B

# 实现阶段

## 阶段A

藤蔓的生长逻辑。使用简单的小棍，一段接着一段的生长。这个阶段主要验证连接算法、验证最基本的视觉效果。

*从起点开始以小棍的形式一段一段生长。注意并不是一段长成后才开始下一段的生长，而是在生命周期的某一阶段开始生出下一段。用颜色的深浅标记出生命周期的状况。此阶段生长方向固定。*

## 阶段B

藤蔓的跟随逻辑。此阶段验证非直线状况下的视觉效果。

*根据输入的位置随时调整下一段出生的小棍的方向。每次调整方向存在角度上限。*

## 阶段C

藤蔓路径抖动。此阶段验证抖动后的效果是否能接近真实藤蔓。会开始使用多根藤蔓。

*多根藤蔓的每段z顺序都随机，这样来模拟缠绕的效果。*

### 阶段C-1

更加灵活的角度控制。

*除了初始生成时可以设定角度外，每段在生成后一段时间内也可以调整方向，调整能力会逐渐衰退。藤蔓除了设定两段间生成时的最大角度外，还要设定调整后的最大角度（比前者略大）。*

### 阶段C-2

目标设定于每一段而不是藤蔓上。

*之前，目的地坐标设定于藤蔓本体上，从而在设定坐标后生成的所有藤蔓段都具有共同的目标。这个修改会单独设定每一段的坐标，略加偏折，这样有助于提升运动复杂度。*

## 阶段D

更多形状的藤蔓段；藤蔓段起止角度不同。此阶段用以验证多种资源带来的藤蔓形状上的变化性。

*此前，藤蔓的每段都是单纯的线性小棍。此阶段会尝试使用不同形状的曲线来代替单纯的直线。由于使用曲线，分段藤蔓的接入接出方向不再共线，生长新分段的时候要考虑接出角度的影响。*

## 阶段E

分支生长。此阶段用以验证使藤蔓更加丰满真实的手段。

*分支不会无限成长下去。另外应该允许存在原生长分支停止生长，分支成为主干持续生长的情况。*


==========

# 工作日志

**20141214**

比预想用了更多的时间，第一步真是痛苦……

**20141215**

* 尝试加入了目标指示物，事实证明真是明智。
* 给part图片两侧加了阴影，看起来高大上多了。
* 根据目前的效果，尝试加入了阶段C-1和C-2。
    * C-1是因为当目标点剧烈变动时，藤蔓经常来不及转弯。但是C-1估计会让已经弯折的藤蔓逐渐变直，这是负面的。
    * C-2可以认为是为了抵消C-1的负面效果而出现的。仍然能保证藤蔓的弯曲

顺带一提，目前算法的思路是尽量增加弯曲的可能性。因为一旦不想要弯曲，只要调整参数就可以了。

**20141216**

多根藤蔓的效果远远超出预期，似乎不用换图都可以了！
——当然不行。

接缝处还是比较硬，让现在的图短一些、让图的末端半透明都会让结果好一些。

期待换成正式图片后的效果

